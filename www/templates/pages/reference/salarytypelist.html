<html>
    <head>
            <title> Начисления и удержания в зарплате </title>
  </head>

    <body>
        <div class="row">
            <div class="col-12  ">
            
<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item">
    <a class="nav-link active"   data-toggle="tab" href="#listtab" role="tab"  >Перечень</a>
  </li>
  <li class="nav-item">
    <a class="nav-link"   data-toggle="tab" href="#calctab" role="tab"  >Формулы</a>
  </li>
  <li class="nav-item">
    <a class="nav-link"   data-toggle="tab" href="#optiontab" role="tab"  >Настройки</a>
  </li>
</ul>
<div class="tab-content"  >
  <div class="tab-pane   show active" id="listtab"  >
       <div class="row"    >
       
               <div zippy="tablepan"  class="col-12  col-md-8  col-xl-6" >
                <h4>Коды начислений и удержаний </h4>    
                <small>По умоляанию коды до 200 - начисления </small>    
                   <br> <a zippy="addnew" class="btn btn-outline-primary  ">Добавить</a>
                    <table class="table table-bordered   table-sm"  >
                        <tr>
                            <th>Наименование</th>

                            <th> Сокращение</th>
                            <th> Код</th>
                           
                            <th> </th>
                        </tr>
                        <tr zippy="stlist">
                            <td zippy="stname"></td>
                            <td zippy="shortname"></td>
                            <td zippy="code"></td>
                          
                            <td  ><a zippy="edit" title="Редактировать"><i class="fa fa-edit"></i></a></td>
                        </tr>
                    </table>


                </div>

                <form class="col-6 col-md-6 col-xl-4" zippy="editform">
                    <div class="form-group">
                        <label for="editstname">Наименование</label>
                        <input autofocus="on"    required="on"  class="form-control" zippy="editstname"/>
                    </div>
                    <div class="form-group">
                        <label for="editshortname">Сокращенное обозначение</label>
                        <input maxlength="10"  style="width:200px;"  required="on"  class="form-control" zippy="editshortname"/>
                        <small>До 10 символов. ДЛя заголовков  в документах и отчетах</small>
                    </div>
                    <div class="form-group">
                        <label for="editcode">Код                        </label>
                        <input maxlength="3" style="width:75px;" pattern="[0-9]{3}"  required="on"  class="form-control" zippy="editcode"/>
                        <small>Трехзначный  код   для использования у формулах. Колонки в документах  и отчетах будут отсортированы по коду.                         </small>
                    </div>
               
                 
                    <div class="form-check">
                        <input zippy="editdisabled" type="checkbox" class="form-check-input">
                        <label class="form-check-label" for="editdisabled">Больше не  используется</label>
                    </div>
                   <div class="form-group">
                     <input zippy="cancel" type="button" value="Отменить" class="btn btn-outline-primary mr-2 ">
                     <input zippy="save" type="submit" value="Сохранить" class="btn btn-primary mr-2 ">
                     <input zippy="delete" type="button" value="Удалить" class="btn btn-outline-danger  ">
                   </div>
                </form>
  
         
       </div>
  </div>
  <div class="tab-pane  " id="calctab"  >
     <h4>Формулы расчета зарплаты</h4>   
      <div class="row"    >
       <div class="col-12 col-md-6 col-xl-4"    >
         
         <form zippy="calcform"  >
             <div class="form-group">
                <label for="calcbase">Расчет основной зарплаты</label>             
                <textarea style="height:100px;width:300px" class="form-control" zippy="calcbase" ></textarea>
                <small>Выполняется  однократно  чтобы  заполнить редактируемое  поле</small>
             </div> 
             <div class="form-group">
                <label for="calc">Расчет начислений и удержаний </label>
                <textarea style="height:400px;width:300px" class="form-control" zippy="calc" ></textarea>
                <small>Выполняется  при редактированиии поля  основной  зарплаты</small>
           </div> 
             <div class="form-group">
                    
                     <a zippy="savecalc"    class="btn btn-success  ">Сохранить</a>&nbsp;&nbsp;
                      
             </div>
                
             
         </form>   
         
          </div>
 <div class="col-12 col-md-6  "    >
     <h5>Коды контекста      </h5>
       <b>daysmon</b>  - количество  раб. дней в  месяце   <br>
       <b>invalid</b> - инвалид (true или false) <br>
       <b>salarytype</b> - тип  зарплаты   1 - оклад, 2 - почасовая, 3 - сдельная <br>  
       <b>salarym</b> - оклад    <br>
       <b>salaryh</b> - почасовая сумма    <br>
       <b>sellvalue</b> - выручка   по по  продажным документам сотрадника<br>
       <b>tasksum</b> - сума  по  сдельному производству <br>
       <b>hours</b> - рабочие  часы с табеля  учета  времени <br>
       <b>days</b> - рабочие дни с табеля <br>
       <b>hours_over</b> - переработка <br>
       <b>hours_week</b> - часы в  выходные <br>
       <b>days_week</b> - дни в  выходные <br>
       <b>days_vac</b> - дни отпуска <br>
       <b>days_sick</b> - больничные дни <br>
       <b>days_bt</b> - дни в  командировке <br>
       <b>advance</b> - аванс <br>
       <b>bonus</b> - премии и бонусы <br>
       <b>fine</b> - штрафы <br>

     
      
       <br>
       <br>
<details>
            <summary><b>Руководство  по синтаксису</b></summary>
            <p>  <br>
             Формулы пишутся с использованием синтаксиса языка JavaScript. Вычисление (в документе Начисление зарплаты) производятся за 
            строками (по сотруднику в перечне) . 
            <br>Начисление и удержание обозначаются кодом с префиксом v. 
            <br>Например v900 = v200 + v300 
            <br>При необходимости список начислений и удержаний может иметь не денежные поля, например количество дней отпуска 
            или больничного для расчета на основании зарплаты и количества дней в месяце. 
            <br> Для форматирования сумм (например после операций деления) можно использовать функцию fa() например = v105=fa(v105) . 
            Количество нулей после запятой будет соответствовать общим настройкам. 

            <br>Также могут использоваться некоторые системные переменные, такие как количество дней в 
            месяцы, количество детей, лицо с инвалидностью, совместитель и т.д. 

            <br>Результат должен быть присвоен переменной с номером, заданным в настройках - 
            поле До выдачи. Этим полем будет выполнена запись в личный счет сотрудника. 

            <br>Формулы сохраняются как настройки, то есть может быть задан алгоритм для любого 
            типа бизнеса и/или любого законодательства любой страны. 
            <br> Расчет может не работать из-за ошибки в формулах, например несуществующая переменная или какой-либо спецсимвол. 
            ошибки скрипта можно увидеть в  devtools (для  хрома  F12-&gt;console)
                         </p>
         </details>        
       </div>
     </div>
       
  </div>
  <div class="tab-pane  " id="optiontab"  >
     <h4>Настройки </h4>
    <div class="row"    >
       <div class="col-12 col-md-6 col-xl-4"    >
         
         <form zippy="optform"  >
             <div class="form-group">
                <label for="optbaseincom">Основная зарплата</label>
                <select  class="form-control" zippy="optbaseincom" >
                   <option value="0">Не выбрано</option>
                </select>
                <small>Показывается  как  поле ручного ввода </small>
               <br> <small> <i class="fa fa-exclamation-triangle"></i> Остальные  поля - вычисляемые  </small>
             </div> 
     
     
      
             <div class="form-group">
                <label for="optall">Всего насчитано</label>
                <select  class="form-control" zippy="optall" >
                
                </select>
                <small>Обязательное поле . </small>
                
             </div> 
     
       
             <div class="form-group">
                <label for="optresult">К выдаче</label>
                <select  class="form-control" zippy="optresult" >
                
                </select>
                <small>Обязательное поле, значение которого заносится  в  лицевой счет. </small>
                
             </div> 
     
             <div class="form-group">
                    
                      
                   <a zippy="saveopt"    class="btn btn-success  ">Сохранить</a>
                      
             </div>
                
             
         </form>    
     
  </div>
</div>           
</div>           
   </div>
      
  </div>
</div>
           <script>               
         function check_delete() {
                return confirm("Удалить?")
            }
        </script>     
    </body>
</html>