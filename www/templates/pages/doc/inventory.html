<html>
   <head>
          <title> Инвентаризация</title>
    </head>
    <body>


        <form zippy="docform">
            <h3> Инвентаризация
                <i class="fa fa-info-circle" style="cursor:pointer;font-size:16px;" data-container="body" data-toggle="popover"
                   data-placement="bottom" data-content="Документ позволяет ввести текущее количество на складе и внести коррективы 
                        в зависимости от разницы в ту или иную сторону. Фактическое количество может 
                        видеть администратор при просмотре документа"></i>
            </h3>

            <div class="row">
                <div class="col-12 col-md-3">
                    <div class="form-group">
                        <label for="document_number">Номер документа</label>
                        <input class="form-control" type="text" zippy="document_number">
                    </div>
                    <div class="form-group  ">
                        <label for="store">Склад</label>
                        <select class="form-control" zippy="store">
                            <option value="0">Не выбрано</option>
                        </select>
                    </div>
             {{#storeemp}}
                     <div class="form-group  ">
                        <label for="storeemp">Сотрудник</label>
                        <select class="form-control  " zippy="storeemp">
                            <option value="0">Не выбрано</option>
                        </select>
                        <small> Материально-ответственное лицо</small>
                    </div> 
                      {{/storeemp}}                    
                    <div class="form-group  ">
                        <label for="store">Категория</label>
                        <select class="form-control" zippy="category">
                            <option value="0">Не выбрано</option>
                        </select>
                        
                    </div>

                    <div class="form-group  ">
                        <label for="brand">Бренд </label>
                        <input class="form-control" type="text" zippy="brand">
                   </div>
                    <div class="form-group  ">
                        <a zippy="loadall">Загрузить все ТМЦ со склада</a>
                   </div>
                </div>
              
                 
                <div class="col-12 col-md-3">
                    <div class="form-group">
                        <label for="document_date"> Дата</label>
                        <input class="form-control" type="text" zippy="document_date"  required="on" >
                    </div>

                    <div class="form-group  ">
                        <label for="notes">Примечание </label>

                        <input class="form-control" type="text" zippy="notes">

                    </div>
                    <div class="form-check">
                        <input zippy="autoincome" type="checkbox" class="form-check-input">
                        <label class="form-check-label" for="autoincome">Автоматически оприходовать излишек </label>

                    </div>
                    <div class="form-check">
                        <input zippy="autooutcome" type="checkbox" class="form-check-input">
                        <label class="form-check-label" for="autooutcome">Автоматически списать недостачу </label>

                    </div>
                    <div class="form-check">
                        <input zippy="reserved" type="checkbox" class="form-check-input">
                        <label class="form-check-label" for="reserved">Учесть зарезервированные </label>
                         <br><small>Если зарезервированный товар остается на складе неотмеченным физически как резерв </small>
                    </div>
                </div>                                 
            </div>
            <div class="row">
                <div class="col-12 col-md-8 col-xl-6">
                    {{#usescanner}}
                    <div class="navbar nav justify-content-start">
                        Штрих код &nbsp;<input autocomplete="off" autofocus="on"   type="text" zippy="barcode" onkeydown="onBarCode()">
                        &nbsp; &nbsp; &nbsp; &nbsp;<a zippy="addcode" class="btn btn-info btn-sm">+</a>
                        
                   
                    </div>
                    {{/usescanner}}
                    &nbsp; <a zippy="addrow" class="btn  btn-info">Добавить ТМЦ</a>

                    <table class="table table-sm mt-2">
                        <tr>
                            <th> <i onclick=" $('.seldel').prop('checked', $('.seldel').prop('checked') == false);"
                                style="width:30px;cursor:pointer" title="Снять/Выставить флаг"
                                    class="fa fa-check-double "></i></th>
                            <th> <a zippy="sortname">Название</a> </th>
                            <th><a zippy="sortcode">Артикул</a></th>

                           <th>{{#usesnumber}}Серия, дата{{/usesnumber}}</th>
                           <th width="40"  class="text-right" >Кол. </th> 

                            <th width="40" class="text-center">Факт. кіл.</th>



                        </tr>
                        <tr zippy="detail">
                            <td><input tabindex="-1"  zippy="seldel" class="seldel" type="checkbox"></td>
                     
                            <td zippy="item"></td>
                            <td zippy="item_code"></td>

                              <td ><span zippy="snumber"></span> <span zippy="sdate" ></span> </td>
                        
                             <td zippy="quantity"  class="text-right" ></td> 

                            <td class="text-center">
                                <input class="form-control qtyprice"   pattern="[0-9,\.]+" style="width:100px;" zippy="qfact">

                            </td>




                        </tr>
                         
                        <tr><td >
                            <a class="text-danger" zippy="delall" title="Удалить"><i class="fa fa-trash"></i></a>
                          </td> 
                         <td colspan="4"></td>   
                         
                            </tr>                 
                       
                    </table>


                </div>
            </div>
            <div class="row">
                <div class="col-12 col-md-6">
                    <input type="button" value="Отменить" zippy="backtolist" class="btn btn-outline-secondary">
                    &nbsp; <input zippy="savedoc" type="submit" value="Сохранить" class="btn   btn-outline-primary">
                    &nbsp;<input zippy="execdoc" type="submit" value="Провести" class="btn btn-primary  ">

                </div>
            </div>




    </form>
    <form zippy="editdetail">
        <h4>Ввод ТМЦ </h4>
        <div class="row">
            <div class="col-12 col-md-4">

                <div class="form-group">
                    <label for="edititem">Наименование</label>
                    <input   class="form-control" zippy="edititem" placeholder="Начните вводить...  ">

                </div>
                {{#usesnumber}}
                <div class="form-group">
                    <label for="editserial">Серия поставщика</label>
                    <div>
                        <input type="text" zippy="editserial" class="form-control"
                               />
                    </div>
                </div>
                {{/usesnumber}}
                <div class="form-group">
                    <label for="editquantity">Количество</label>
                    <div>
                        <input style="width:100px;" type="text" zippy="editquantity" class="form-control qtyprice"
                                required="on"  pattern="[0-9,\.]+"/>
                    </div>
                </div>

                <div class="form-group">
                    <input type="button" zippy="cancelrow" value="Отменить" class="btn   btn-outline-secondary  mr-2">
                    <input zippy="saverow" type="submit" value="Сохранить" class="btn  btn-outline-primary">
                    
                </div>
            </div>
        </div>

    </form>

    
    <script>
        $(document).ready(function () {
 
 
             
            var val = sessionStorage.getItem('decoder_readers');
            if (val != null) {
                $('#decoder_readers').val(val);
            }
            val = sessionStorage.getItem('stream_constraints');
            if (val != null) {
                $('#stream_constraints').val(val);
            }

            $("#edititem").focus()   
        });

        function onBarCode(ele) {

            if (event.key === 'Enter' || event.keyCode == 13) {
                // alert($('#barcode').val());
                $('#addcode').click()
            }
        }

        function check_loadall(ele) {
            document.getElementById('dialogwait').showModal()
            return true;
            
        }


  


     
    </script>

 
</body>

</html>
